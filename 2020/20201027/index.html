<!DOCTYPE html>
<html lang="zh-CN">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="树莓派4B+英特尔神经计算棒(Intel Movidius Neural Computing Stick)-YOLOV3目标检测(1)" />
    <meta name="hexo-theme-A4" content="v1.9.8" />
    <link rel="alternate icon" type="image/webp" href="/img/20250602032635.jpg">
    <title>Yann | 我愿做你光华中淡淡的一笔</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


   
        
<link rel="stylesheet" href="/css/custom.css">

    

<meta name="generator" content="Hexo 5.4.2"></head>
    
    

    
    



    

    
    




    
    <style>
        :root {
            --waline-theme-color: #323e74; 
            --waline-color: #323e74; 
            --waline-border-color: #323e74; 
            --waline-white: #323e74; 
            --waline-bgcolor-light: #f2fafc;  
        }
        body {
            color: #323e74;
            background: #eaeae8;
        }
        .post-md code {
            background: #e7f7f3;
            color: #7f688d; 
        }
        .post-md pre, .post-md .highlight {
            background: #e7f7f3;
            color: #7f688d; 
        }
        pre .string, pre .value, pre .inheritance, pre .header, pre .ruby .symbol, pre .xml .cdata {
            color: #323e74;
        }
        pre .number, pre .preprocessor, pre .built_in, pre .literal, pre .params, pre .constant {
            color: #323e74;
        }
        .year-font-color {
            color: #323e74 !important;
        }
        .wl-card span.wl-nick {
            color: #323e74; 
        }
        .wl-card .wl-badge {
            border: 1px solid #323e74;
            color: #323e74; 
        }
        .wl-btn {
            border: 1px solid #323e74; 
            color:  #323e74;  
        }
        .wl-btn.primary {
            color: #f2fafc; 
        }
        .wl-header label {
            color: #323e74;
        }
        a {
            color: #7f688d;
        }

        .post-md a {
            color: #7f688d;
        }

        .nav li a {
            color: #7f688d;
        }

        .archive-main a:link {
            color: #7f688d;
        }
        .archive-main a:visited {
            color: #767c7c; 
        }

        .archive li span {
            color: #323e74;
        }

        .post-main-title {
            color: #323e74;
        }

        .post-md h1,
        .post-md h2,
        .post-md h3,
        .post-md h4,
        .post-md h5,
        .post-md h6 {
            color: #323e74;
        }

        [data-waline] p {
            color: #323e74;
        }
        [data-waline] a {
            color: #323e74;
        } 
        .wl-sort li.active {
            color: #323e74;
        }

        .wl-card .wl-meta>span {
            background: #f2fafc;
        }

        .paper {
            background: #eaeae8;
        }

        .index-main {
            background: #f2fafc;
        }

        .paper-main {
            background: #f2fafc;
        }

        .wl-panel {
            background: #f2fafc;
        }

        .archive li:nth-child(odd) {
            background: #f2fafc;
            ;
        }

        .archive li:nth-child(even) {
            background: #f2fafc;
        }

        .post-md table tr:nth-child(odd) td {
            background: #f2fafc;
        }

        .post-md table tr:nth-child(even) td {
            background: #f2fafc;
        }

    
        .progress-wrap::after {
            color: #323e74; /* 箭头的颜色 */
        }
        .progress-wrap svg.progress-circle path {
	        stroke: #323e74; /* 边框的颜色 */
        }
        .progress-wrap::before {
	        background-image: linear-gradient(298deg, #7f688d, #7f688d); /* 鼠标滑过的箭头颜色 */
         }

        .return-to-last-progress-wrap::after {
            color: #323e74; /* 箭头的颜色 */
        }
        .return-to-last-progress-wrap svg.progress-circle path {
	        stroke: #323e74; /* 边框的颜色 */
        }
        .return-to-last-progress-wrap::before {
	        background-image: linear-gradient(298deg, #7f688d, #7f688d); /* 鼠标滑过的箭头颜色 */
         }

         .left-toc-container::-webkit-scrollbar-thumb {
            background-color: #323e74; /* 设置滚动条拖动块的颜色 */
        }

        .bs-docs-sidebar .nav>.active>a,
        .bs-docs-sidebar .nav>li>a:hover,
        .bs-docs-sidebar .nav>li>a:focus {
            color: #7f688d;
            border-left-color: #7f688d;
        }
        .bs-docs-sidebar .nav>li>a {
            color:  #323e74;
        }
    </style>

    
    <style>
        body {
            background-image: url(/img/3.jpg);
            background-attachment: fixed;  /* 背景固定，不随页面滚动 */
            background-repeat: no-repeat;  /* 防止背景图片重复 */
            background-size: cover;       /* 背景自适应大小，覆盖整个背景 */
            background-position: center;   /* 背景居中显示 */
        }
        .paper {
            background-image: url(/img/3.jpg);
            background-attachment: fixed;  /* 背景固定，不随页面滚动 */
            background-repeat: no-repeat;  /* 防止背景图片重复 */
            background-size: cover;       /* 背景自适应大小，覆盖整个背景 */
            background-position: center;   /* 背景居中显示 */
        }  
    </style>


    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #eaeae8  ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: '🌓', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            
                <div class="left-toc-container">
                    <nav id="toc" class="bs-docs-sidebar"></nav>
                </div>
            
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <style>
            .header-img {
                width: 56px;
                height: auto;
                object-fit: cover; /* 保持图片比例 */
                transition: transform 0.3s ease-in-out; 
                border-radius: 0; 
            }
            
        </style>
        <img 
            alt="^-^" 
            cache-control="max-age=86400" 
            class="header-img" 
            src="/img/20250602032635.jpg" 
        />
        <div class="header-content">
            <a class="logo" href="/">Yann</a> 
            <span class="description">人工智能、计算机、机器学习、linux、程序员</span> 
        </div>
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">首页</a></li>
            
        
            
                <li><a href="/list/">文章</a></li>
            
        
            
                <li><a href="/about/">关于</a></li>
            
        
            
                <li><a href="/tags/">标签</a></li>
            
        
            
                <li><a href="/categories/">分类</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    树莓派4B+英特尔神经计算棒(Intel Movidius Neural Computing Stick)-YOLOV3目标检测(1)
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                    <span>最近更新：2020-10-29</span> 
                
                
                    
                        &nbsp; | &nbsp;
                    
                     <span>字数总计：2k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>阅读估时：8分钟</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span id="busuanzi_container_page_pv">
                        阅读量：<span id="busuanzi_value_page_pv"></span>次
                    </span>
                
            </div>
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Hardware"><span class="post-toc-text">Hardware</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Environment"><span class="post-toc-text">Environment</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Step"><span class="post-toc-text">Step</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%B8%80%E3%80%81%E5%9C%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%E5%AE%89%E8%A3%85NCS%E7%8E%AF%E5%A2%83"><span class="post-toc-text">一、在树莓派上安装NCS环境</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BA%8C%E3%80%81%E5%9C%A8windows%E4%B8%8A%E5%AE%89%E8%A3%85NCS%E7%8E%AF%E5%A2%83%EF%BC%88%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2%E7%94%A8%E5%88%B0%EF%BC%89"><span class="post-toc-text">二、在windows上安装NCS环境（格式转换用到）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%B8%89%E3%80%81%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="post-toc-text">三、格式转换</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%9B%9B%E3%80%81%E5%9C%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%E9%83%A8%E7%BD%B2"><span class="post-toc-text">四、在树莓派上部署</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Step1-%E5%9C%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%E5%AE%89%E8%A3%85NCS%E7%8E%AF%E5%A2%83"><span class="post-toc-text">Step1 在树莓派上安装NCS环境</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1%E3%80%81%E4%B8%8B%E8%BD%BDOpenVINO-toolkit-for-Raspbian"><span class="post-toc-text">1、下载OpenVINO toolkit for Raspbian</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2%E3%80%81%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%E5%AE%89%E8%A3%85OpenVINO%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="post-toc-text">2、树莓派上安装OpenVINO工具包</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Workflow-for-Raspberry-Pi"><span class="post-toc-text">Workflow for Raspberry Pi</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Step2-%E5%9C%A8Windows%E4%B8%8A%E5%AE%89%E8%A3%85NCS%E7%8E%AF%E5%A2%83"><span class="post-toc-text">Step2 在Windows上安装NCS环境</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1%E3%80%81%E5%AE%89%E8%A3%85%E8%8B%B1%E7%89%B9%E5%B0%94%C2%AE%E5%88%86%E5%B8%83%E5%BC%8FOpenVINO%E2%84%A2%E5%B7%A5%E5%85%B7%E5%8C%85%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="post-toc-text">1、安装英特尔®分布式OpenVINO™工具包核心组件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2%E3%80%81%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="post-toc-text">2、设置环境变量</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%B8%8B%E5%88%97%E6%AD%A5%E9%AA%A4%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%A1%AE%E8%AE%A4%E4%BD%BF%E7%94%A8OpenVINO"><span class="post-toc-text">下列步骤进一步确认使用OpenVINO</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9E%8B%E4%BC%98%E5%8C%96%E7%A8%8B%E5%BA%8F"><span class="post-toc-text">1、配置模型优化程序</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2%E3%80%81%E6%A8%A1%E5%9E%8B%E4%BC%98%E5%8C%96%E5%99%A8%E9%85%8D%E7%BD%AE%E6%AD%A5%E9%AA%A4"><span class="post-toc-text">2、模型优化器配置步骤</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3%E3%80%81%E6%B5%8B%E8%AF%95"><span class="post-toc-text">3、测试</span></a></li></ol></li></ol></li></ol></li></ol>
            
        
        <div class=".article-gallery"><blockquote>
<p>最近在看各种AI的加速方案以及边缘计算，jetsonnano、英伟达TX2、华为昇腾啊什么的</p>
<p>jetson nano 感觉性价比不如rk3399，还有Intel的计算棒。做终端应用成本太高，但是。。。。。3399得1000+了啊</p>
<p>下面就是关于Intel神经棒二代的上手教程。</p>
</blockquote>
<span id="more"></span>
<h2 id="Hardware"><a href="#Hardware" class="headerlink" title="Hardware"></a>Hardware</h2><p><a href="https://link.zhihu.com/?target=https%3A//developer.movidius.com/">Intel Movidius Neural Computing Stick</a> </p>
<p><a target="_blank" rel="noopener" href="https://pic2.zhimg.com/80/v2-68d4491ad612eb93863b60750f56819d_720w.jpg" class="gallery-item" style="box-shadow: none;"> <img src="https://pic2.zhimg.com/80/v2-68d4491ad612eb93863b60750f56819d_720w.jpg" alt=""></a></p>
<p>NCS是一个专用计算芯片，但能起到类似GPU对神经网络运算的加速作用。</p>
<p>SDK是开源的：<a href="https://link.zhihu.com/?target=https%3A//github.com/movidius/ncsdk">https://github.com/movidius/ncsdk</a></p>
<p>提问不在GitHub issue里，而是在一个专门的论坛：<a href="https://link.zhihu.com/?target=https%3A//ncsforum.movidius.com/">https://ncsforum.movidius.com/</a></p>
<p>虽然目前NCSDK支持的框架包含Tensorflow和Caffe，但并不是支持所有的模型，目前已支持的模型列表可以在这里查到：<a href="https://link.zhihu.com/?target=https%3A//github.com/movidius/ncsdk/releases">https://github.com/movidius/ncsdk/releases</a></p>
<h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><p>ncsdk的环境分为两部分，训练端和测试端。</p>
<ol>
<li>训练端通常是一个Ubuntu 带GPU主机，训练Caffe或TensorFlow模型，编译成NCS可以执行的graph；</li>
<li>测试端则面向ncs python mvnc api编程，可以运行在树莓派上raspbian stretch版本，也可以运行在训练端这种机器上。</li>
</ol>
<h2 id="Step"><a href="#Step" class="headerlink" title="Step"></a>Step</h2><h4 id="一、在树莓派上安装NCS环境"><a href="#一、在树莓派上安装NCS环境" class="headerlink" title="一、在树莓派上安装NCS环境"></a>一、在树莓派上安装NCS环境</h4><h4 id="二、在windows上安装NCS环境（格式转换用到）"><a href="#二、在windows上安装NCS环境（格式转换用到）" class="headerlink" title="二、在windows上安装NCS环境（格式转换用到）"></a>二、在windows上安装NCS环境（格式转换用到）</h4><h4 id="三、格式转换"><a href="#三、格式转换" class="headerlink" title="三、格式转换"></a>三、格式转换</h4><h4 id="四、在树莓派上部署"><a href="#四、在树莓派上部署" class="headerlink" title="四、在树莓派上部署"></a>四、在树莓派上部署</h4><h2 id="Step1-在树莓派上安装NCS环境"><a href="#Step1-在树莓派上安装NCS环境" class="headerlink" title="Step1 在树莓派上安装NCS环境"></a>Step1 在树莓派上安装NCS环境</h2><p><strong>Operating Systems</strong></p>
<ul>
<li>Raspbian* Buster, 32-bit</li>
<li>Raspbian* Stretch, 32-bit</li>
</ul>
<p><strong>Software</strong></p>
<ul>
<li>CMake* 3.7.2 or higher</li>
<li>Python* 3.5, 32-bit</li>
</ul>
<h4 id="1、下载OpenVINO-toolkit-for-Raspbian"><a href="#1、下载OpenVINO-toolkit-for-Raspbian" class="headerlink" title="1、下载OpenVINO toolkit for Raspbian"></a>1、下载<a target="_blank" rel="noopener" href="https://download.01.org/opencv/2020/openvinotoolkit/">OpenVINO toolkit for Raspbian</a></h4><h4 id="2、树莓派上安装OpenVINO工具包"><a href="#2、树莓派上安装OpenVINO工具包" class="headerlink" title="2、树莓派上安装OpenVINO工具包"></a>2、树莓派上安装OpenVINO工具包</h4><p>可以参考官网教程：<a target="_blank" rel="noopener" href="https://docs.openvinotoolkit.org/latest/_docs_install_guides_installing_openvino_raspbian.html">Install OpenVINO™ toolkit for Raspbian* OS</a><br> 下载完后工具包位于/home/pi/Downloads目录下，如果不是，可以创建一个Downloads目录并把工具包放在此目录下<br> <strong>切换至Downloads目录下:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd  ~/Downloads</span><br></pre></td></tr></table></figure>
<p><strong>配置路径与环境：</strong><br> 执行以下命令，会自动对setupvars.sh文件做修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s|&lt;INSTALLDIR&gt;|$(pwd)/l_openvino_toolkit_runtime_raspbian_p_2019.3.334|&quot; l_openvino_toolkit_runtime_raspbian_p_2019.3.334/bin/setupvars.sh</span><br></pre></td></tr></table></figure>
<p>配置虚拟环境：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">suorce l_openvino_toolkit_runtime_raspbian_p_2019.3.334/bin/setupvars.sh</span><br></pre></td></tr></table></figure>
<p><strong>添加USB规则：</strong><br> 将当前Linux用户添加到users组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G users &quot;$(whoami)&quot;</span><br></pre></td></tr></table></figure>
<p>注：1、”$(whoami)”是用户名，2、这里要说的是我们现在是root用户，如果打开新窗口的话起始用户是pi，所以出现[  setupvars.sh] OpenVINO environment  initialized，是对于pi用户来说的。如果在新窗口中用root执行程序，其实并没有成功加载[ setupvars.sh]  OpenVINO environment initialized，需要自己再执行一遍<br>  source/home/pi/Downloads/l_openvino_toolkit_runtime_raspbian_p_2019.3.334/bin/setupvars.sh，才能给root用户配置好OpenVINO environment initialized。<br> 接下来配置USB规则，执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh l_openvino_toolkit_runtime_raspbian_p_2019.3.334/install_dependencies/install_NCS_udev_rules.sh</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20191230164606485.png" class="gallery-item" style="box-shadow: none;"> <img src="https://img-blog.csdnimg.cn/20191230164606485.png" alt=""></a></p>
<p><strong>demo测试验证安装是否成功</strong><br> 运行人脸检测的实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd l_openvino_toolkit_runtime_raspbian_p_2019.3.334/deployment_tools/inference_engine/samples</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_FLAGS=&quot;-march=armv7-a&quot;</span><br><span class="line">make -j2 object_detection_sample_ssd</span><br></pre></td></tr></table></figure>
<p>编译完成后，下载网络和权重文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://download.01.org/opencv/2019/open_model_zoo/R1/models_bin/face-detection-adas-0001/FP16/face-detection-adas-0001.bin</span><br><span class="line">wget --no-check-certificate https://download.01.org/opencv/2019/open_model_zoo/R1/models_bin/face-detection-adas-0001/FP16/face-detection-adas-0001.xml</span><br></pre></td></tr></table></figure>
<p>然后自己在网上找一张人脸的图片，执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./armv7l/Release/object_detection_sample_ssd -m face-detection-adas-0001.xml -d MYRIAD -i &lt;path_to_image&gt;图片的绝对路径</span><br></pre></td></tr></table></figure>
<p>如果运行成功，会在build文件夹下输出一种观念out_0.bmp图片，即表示计算棒运行成功。</p>
<p><strong>Opencv+python api 调用方法</strong><br> 新建一个文件夹，先建立一个face_detection.py文件，写入：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="comment"># Load the model </span></span><br><span class="line">net = cv.dnn.readNet(<span class="string">&#x27;face-detection-adas-0001.xml&#x27;</span>, <span class="string">&#x27;face-detection-adas-0001.bin&#x27;</span>) </span><br><span class="line"><span class="comment"># Specify target device </span></span><br><span class="line">net.setPreferableTarget(cv.dnn.DNN_TARGET_MYRIAD)</span><br><span class="line"><span class="comment"># Read an image </span></span><br><span class="line">frame = cv.imread(<span class="string">&#x27;/path/to/image&#x27;</span>)</span><br><span class="line"><span class="comment"># Prepare input blob and perform an inference </span></span><br><span class="line">blob = cv.dnn.blobFromImage(frame, size=(<span class="number">672</span>, <span class="number">384</span>), ddepth=cv.CV_8U) net.setInput(blob) </span><br><span class="line">out = net.forward()</span><br><span class="line"><span class="comment"># Draw detected faces on the frame </span></span><br><span class="line"><span class="keyword">for</span> detection <span class="keyword">in</span> out.reshape(-<span class="number">1</span>, <span class="number">7</span>): </span><br><span class="line">    confidence = <span class="built_in">float</span>(detection[<span class="number">2</span>]) </span><br><span class="line">    xmin = <span class="built_in">int</span>(detection[<span class="number">3</span>] * frame.shape[<span class="number">1</span>]) </span><br><span class="line">    ymin = <span class="built_in">int</span>(detection[<span class="number">4</span>] * frame.shape[<span class="number">0</span>]) </span><br><span class="line">    xmax = <span class="built_in">int</span>(detection[<span class="number">5</span>] * frame.shape[<span class="number">1</span>]) </span><br><span class="line">    ymax = <span class="built_in">int</span>(detection[<span class="number">6</span>] * frame.shape[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> confidence &gt; <span class="number">0.5</span>:</span><br><span class="line">        cv.rectangle(frame, (xmin, ymin), (xmax, ymax), color=(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>))</span><br><span class="line"><span class="comment"># Save the frame to an image file </span></span><br><span class="line">cv.imwrite(<span class="string">&#x27;out.png&#x27;</span>, frame)</span><br></pre></td></tr></table></figure>
<p>在文件夹中放入刚刚下载的那两个文件：face-detection-adas-0001.bin和face-detection-adas-0001.xml还有用于检测用的脸的图片，执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 face_detection.py</span><br></pre></td></tr></table></figure>
<h3 id="Workflow-for-Raspberry-Pi"><a href="#Workflow-for-Raspberry-Pi" class="headerlink" title="Workflow for Raspberry Pi"></a>Workflow for Raspberry Pi</h3><p>If you want to use your model for inference, the model must be  converted to the .bin and .xml Intermediate Representation (IR) files  that are used as input by Inference Engine. OpenVINO™ toolkit support on Raspberry Pi only includes the Inference Engine module of the Intel®  Distribution of OpenVINO™ toolkit. The Model Optimizer is not supported  on this platform. To get the optimized models you can use one of the  following options:</p>
<ul>
<li><p>Download a set of ready-to-use pre-trained models for the appropriate version of OpenVINO from the Intel® Open Source  Technology Center:</p>
<ul>
<li>Models for the 2020.1 release of OpenVINO are available at <a target="_blank" rel="noopener" href="https://download.01.org/opencv/2020/openvinotoolkit/2020.1/open_model_zoo/">https://download.01.org/opencv/2020/openvinotoolkit/2020.1/open_model_zoo/</a>.</li>
<li>Models for the 2019 R1 release of OpenVINO are available at <a target="_blank" rel="noopener" href="https://download.01.org/opencv/2019/open_model_zoo/R1/">https://download.01.org/opencv/2019/open_model_zoo/R1/</a>.</li>
<li>Models for the 2018 R5 release of OpenVINO are available at <a target="_blank" rel="noopener" href="https://download.01.org/openvinotoolkit/2018_R5/open_model_zoo/">https://download.01.org/openvinotoolkit/2018_R5/open_model_zoo/</a>.</li>
</ul>
<p>For more information on pre-trained models, see <a target="_blank" rel="noopener" href="https://docs.openvinotoolkit.org/latest/omz_models_intel_index.html">Pre-Trained Models Documentation</a></p>
</li>
<li><p>Convert the model using the Model Optimizer from a full installation of Intel® Distribution of OpenVINO™ toolkit on one of the supported platforms. Installation instructions are available:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.openvinotoolkit.org/latest/openvino_docs_install_guides_installing_openvino_macos.html">Installation Guide for macOS*</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.openvinotoolkit.org/latest/openvino_docs_install_guides_installing_openvino_windows.html">Installation Guide for Windows*</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.openvinotoolkit.org/latest/openvino_docs_install_guides_installing_openvino_linux.html">Installation Guide for Linux*</a></li>
</ul>
</li>
</ul>
<h2 id="Step2-在Windows上安装NCS环境"><a href="#Step2-在Windows上安装NCS环境" class="headerlink" title="Step2 在Windows上安装NCS环境"></a>Step2 在Windows上安装NCS环境</h2><p><strong>Operating System</strong></p>
<ul>
<li>Microsoft Windows* 10 64-bit</li>
</ul>
<p><strong>Software</strong></p>
<ul>
<li><p><a target="_blank" rel="noopener" href="http://visualstudio.microsoft.com/downloads/">Microsoft Visual Studio* with C++ <strong>2019 or 2017</strong> with MSBuild</a></p>
</li>
<li><p>CMake <strong>3.10 or higher</strong> 64-bit</p>
<blockquote>
<p><strong>NOTE</strong>: If you want to use Microsoft Visual Studio 2019, you are required to install CMake 3.14. </p>
</blockquote>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.python.org/downloads/windows/">Python <strong>3.6</strong> - <strong>3.8</strong> 64-bit</a></p>
</li>
</ul>
<h4 id="1、安装英特尔®分布式OpenVINO™工具包核心组件"><a href="#1、安装英特尔®分布式OpenVINO™工具包核心组件" class="headerlink" title="1、安装英特尔®分布式OpenVINO™工具包核心组件"></a>1、安装英特尔®分布式OpenVINO™工具包核心组件</h4><p>可以进入<a target="_blank" rel="noopener" href="https://software.intel.com/zh-cn/openvino-toolkit">OpenVINO官网</a>参考官方安装步骤，也可以参考我的安装步骤。</p>
<p><strong>英特尔®分布式OpenVINO™工具包核心组件安装步骤：</strong></p>
<ol>
<li>如果您尚未下载英特尔®分布式OpenVINO™工具包，请下载最新版本。默认情况下，该文件将保存到Downloads目录w_openvino_toolkit_p_2019.3.379.exe。</li>
<li>转到该Downloads文件夹。</li>
<li>双击w_openvino_toolkit_p_2019.3.379.exe。将打开一个窗口，您可以选择安装目录和组件。默认安装目录是C:\Program Files (x86)\IntelSWTools\openvino_2019.3.379 .为了简便，还会创建 C:\Program  Files (x86)\IntelSWTools\openvino安装目录快捷方式。如果选择其他安装目录，安装程序将为您创建目录：<br> <a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20191230211524163.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbmtpblRhbw==,size_16,color_FFFFFF,t_70" title="在这里插入图片描述" class="gallery-item" style="box-shadow: none;"> <img src="https://img-blog.csdnimg.cn/20191230211524163.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbmtpblRhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></a></li>
</ol>
<p>4.单击下一步。</p>
<p>5.系统会询问您是否同意收集信息。选择您选择的选项。单击下一步。</p>
<p>6.如果您缺少外部依赖项，则会看到警告屏幕。记下您缺少的依赖项。<strong>此时您不需要采取任何行动。</strong>安装英特尔®分布式OpenVINO™工具包核心组件后，将向您提供安装缺少的依赖项说明。下面的屏幕表示您缺少两个依赖项：</p>
<p>7.单击下一步。</p>
<p>8.安装的第一部分完成后，最终屏幕会通知您已安装核心组件并仍需执行自他步骤：</p>
<h4 id="2、设置环境变量"><a href="#2、设置环境变量" class="headerlink" title="2、设置环境变量"></a>2、设置环境变量</h4><p>在编译和运行OpenVINO™应用程序之前，必须更新多个环境变量。打开命令提示符并运行以下批处理文件以临时设置环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files(x86)\IntelSWTools\openvino\bin\setupvars.bat</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p><strong>（可选）</strong>：关闭“命令提示符”窗口时，将删除OpenVINO工具箱环境变量。作为选项，您可以手动永久设置环境变量。</p>
<h4 id="下列步骤进一步确认使用OpenVINO"><a href="#下列步骤进一步确认使用OpenVINO" class="headerlink" title="下列步骤进一步确认使用OpenVINO"></a>下列步骤进一步确认使用OpenVINO</h4><h5 id="1、配置模型优化程序"><a href="#1、配置模型优化程序" class="headerlink" title="1、配置模型优化程序"></a>1、配置模型优化程序</h5><p><strong>重要信息</strong>：这些步骤是必需的。您必须为至少一个框架配置Model Optimizer。如果您未完成本节中的步骤，模型优化程序将失败。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files (x86)\IntelSWTools\openvino\deployment_tools\model_optimizer</span><br></pre></td></tr></table></figure>
<h5 id="2、模型优化器配置步骤"><a href="#2、模型优化器配置步骤" class="headerlink" title="2、模型优化器配置步骤"></a>2、模型优化器配置步骤</h5><p>您可以一次为所有受支持的框架配置模型优化程序，也可以一次为一个框架配置模型优化程序。选择最适合您需求的选项。如果看到错误消息，请确保已安装所有依赖项。<br> <strong>选项1：同时为所有支持的框架配置Model Optimizer</strong><br> 打开命令提示符，转到Model Optimizer条件目录，执行下列命令以配置Caffe <em>，TensorFlow </em>，MXNet <em>，Kaldi </em>和ONNX *的模型优化器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install_prerequisites.bat</span><br></pre></td></tr></table></figure>
<p>也可以安装你需要的。比如本次demo用的是caffe.所以装个caffe的。</p>
<p>把后面那个文件换成install_prerequistites_caffe.bat即可。</p>
<h5 id="3、测试"><a href="#3、测试" class="headerlink" title="3、测试"></a>3、测试</h5><p>先瞎跑个测试脚本，证明我们把一套openvino装成功了。。。。</p>
<p>在下面这个地址找到demo_squeezenet_download_convert_run.bat，跑起来。。。</p>
<p><a target="_blank" rel="noopener" href="https://pic3.zhimg.com/80/v2-a28ce9b7f0b3ef6718a5373db803cf62_720w.png" class="gallery-item" style="box-shadow: none;"> <img src="https://pic3.zhimg.com/80/v2-a28ce9b7f0b3ef6718a5373db803cf62_720w.png" alt=""></a></p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200108191904455.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbmtpblRhbw==,size_16,color_FFFFFF,t_70" class="gallery-item" style="box-shadow: none;"> <img src="https://img-blog.csdnimg.cn/20200108191904455.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0dhbmtpblRhbw==,size_16,color_FFFFFF,t_70" alt=""></a></p>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2020-10-27</span>
            
                <span>该篇文章被 Yann</span>
            
            
                <span>打上标签:
                    
                    
                        <a href='/tags/Intel-Neural-Compute-stick/'>
                            Intel-Neural-Compute-stick
                        </a>
                    
                </span>
             
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>上一篇：<a href='/2020/20201028/'>树莓派4B+英特尔神经计算棒(Intel Movidius Neural Computing Stick)-YOLOV3目标检测(2)</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">下一篇：<a href="/2020/20200720/">APDS-9960 RGB and Gesture Sensor</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            © 1949-2025 China 

            
                

            
        </span>
       
    
</div>



<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>🌊看过大海的人不会忘记海的广阔🌊</span>
            
                <span class="footer-last-span-right"><i>本站由<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>驱动｜使用<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>主题</i></span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // 启用插件
            thumbnail: true,          // 显示缩略图
            zoom: true,               // 启用缩放功
            rotate: true,             // 启用旋转功能能
            autoplay: true,        // 启用自动播放功能
            fullScreen: true,      // 启用全屏功能
            pager: false, //页码,
            zoomFromOrigin: true,   // 从原始位置缩放
            actualSize: true,       // 启用查看实际大小的功能
            enableZoomAfter: 300,    // 延迟缩放，确保图片加载完成后可缩放
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // 修复选择器
    }
    
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>
<script src="/js/emojiHandler.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    wrapEmojis('.paper');
  });
</script>